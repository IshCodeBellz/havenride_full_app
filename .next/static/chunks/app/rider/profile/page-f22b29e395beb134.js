(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5235],{1687:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>c});var t=r(5155),l=r(2115),n=r(5419),a=r(4524),i=r(3371);function o(){var e,s;let{user:r}=(0,n.Jd)(),[a,i]=(0,l.useState)((null==r?void 0:r.fullName)||""),[o,c]=(0,l.useState)((null==r||null==(e=r.primaryEmailAddress)?void 0:e.emailAddress)||""),[d,h]=(0,l.useState)(""),[x,m]=(0,l.useState)(!1),[u,g]=(0,l.useState)(!1);return(0,t.jsxs)("div",{className:"px-8 py-6 max-w-6xl mx-auto",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-[#0F3D3E]",children:"Your Account"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Manage your details and preferences"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-[#0F3D3E] mb-6",children:"Profile Information"}),(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,t.jsx)("div",{className:"w-20 h-20 bg-[#0F3D3E] rounded-full flex items-center justify-center text-white text-2xl font-bold",children:(null==r||null==(s=r.firstName)?void 0:s.charAt(0))||"U"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Profile Picture"}),(0,t.jsx)("button",{className:"text-[#00796B] text-sm font-medium hover:underline",children:"Change Photo"})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),(0,t.jsx)("input",{type:"text",value:a,onChange:e=>i(e.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#00796B]",placeholder:"John Doe"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,t.jsx)("input",{type:"email",value:o,onChange:e=>c(e.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#00796B]",placeholder:"johndoe@email.com"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),(0,t.jsx)("input",{type:"tel",value:d,onChange:e=>h(e.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#00796B]",placeholder:"+44 7911 123456"})]}),(0,t.jsx)("button",{onClick:()=>{alert("Profile updates will be implemented with backend integration")},className:"w-full bg-[#00796B] text-white py-3 rounded-lg font-semibold hover:bg-[#00695C] transition-colors",children:"Save Changes"})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-[#0F3D3E] mb-6",children:"Saved Locations"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-[#E0F2F1] rounded-full flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-5 h-5 text-[#00796B]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),(0,t.jsx)("span",{className:"font-medium",children:"Home"})]}),(0,t.jsx)("button",{className:"text-[#00796B] hover:underline",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-[#E0F2F1] rounded-full flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-5 h-5 text-[#00796B]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),(0,t.jsx)("span",{className:"font-medium",children:"Work"})]}),(0,t.jsx)("button",{className:"text-[#00796B] hover:underline",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-[#E0F2F1] rounded-full flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-5 h-5 text-[#00796B]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,t.jsx)("span",{className:"font-medium",children:"Hospital"})]}),(0,t.jsx)("button",{className:"text-[#00796B] hover:underline",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-[#0F3D3E] mb-6",children:"Accessibility Preferences"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:x,onChange:e=>m(e.target.checked),className:"w-5 h-5 text-[#00796B] border-gray-300 rounded focus:ring-[#00796B]"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:"Always request wheelchair-accessible vehicle"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"All rides will be booked with wheelchair access by default"})]})]}),(0,t.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:u,onChange:e=>g(e.target.checked),className:"w-5 h-5 text-[#00796B] border-gray-300 rounded focus:ring-[#00796B]"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:"Needs assistance entering vehicle"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Driver will be notified to provide extra assistance"})]})]})]}),(0,t.jsx)("button",{className:"w-full mt-6 bg-[#00796B] text-white py-3 rounded-lg font-semibold hover:bg-[#00695C] transition-colors",children:"Add New Card"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-[#0F3D3E] mb-6",children:"Payment Methods"}),(0,t.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 mb-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-blue-600 font-bold text-xs",children:"VISA"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Card ending in 2483"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Expires 12/25"})]})]}),(0,t.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-full",children:"Default"})]})}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"All data is securely stored in compliance with GDPR."})]})]})]})}function c(){return(0,t.jsx)(i.A,{requiredRole:["RIDER"],children:(0,t.jsx)(a.A,{userRole:"RIDER",children:(0,t.jsx)(o,{})})})}},3371:(e,s,r)=>{"use strict";r.d(s,{A:()=>i});var t=r(5155),l=r(2115),n=r(63),a=r(5419);function i(e){let{children:s,requiredRole:r}=e,{user:i,isLoaded:o}=(0,a.Jd)(),c=(0,n.useRouter)(),[d,h]=(0,l.useState)(!0),[x,m]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{!async function(){if(o){if(!(null==i?void 0:i.id))return c.push("/");try{try{let e=await fetch("/api/users/ensure-role");if(!e.ok){let s=await e.text();console.error("Failed to ensure role:",s)}}catch(e){console.error("Error calling ensure-role:",e)}let e=await fetch("/api/users/me");if(!e.ok){console.error("Failed to fetch user data"),c.push("/");return}let s=(await e.json()).role;if(console.log("RoleGate: User role is",s,"Required:",r),!s){console.log("RoleGate: No role found, redirecting home"),c.push("/");return}if(r&&!r.includes(s)){console.log("RoleGate: User doesn't have required role, redirecting to their dashboard"),"RIDER"===s?c.push("/rider"):"DRIVER"===s?c.push("/driver"):"DISPATCHER"===s?c.push("/dispatcher"):"ADMIN"===s?c.push("/admin"):c.push("/");return}console.log("RoleGate: Access granted"),m(!0)}catch(e){console.error("Error checking role:",e)}finally{h(!1)}}}()},[i,o,c,r]),d)?(0,t.jsx)("div",{className:"max-w-4xl mx-auto p-6",children:(0,t.jsx)("div",{className:"text-center",children:"Loading..."})}):x?(0,t.jsx)(t.Fragment,{children:s}):null}},3667:(e,s,r)=>{Promise.resolve().then(r.bind(r,1687))},4524:(e,s,r)=>{"use strict";r.d(s,{A:()=>x});var t=r(5155),l=r(2619),n=r.n(l),a=r(5239),i=r(63),o=r(5419);function c(e){let{userRole:s}=e,r=(0,i.usePathname)(),l="DRIVER"===s?"/driver":"DISPATCHER"===s?"/dispatcher":"ADMIN"===s?"/admin":"/rider";return(0,t.jsxs)("div",{className:"w-64 min-h-screen bg-[#0F3D3E] text-white flex flex-col",children:[(0,t.jsx)("div",{className:"p-6 flex justify-center",children:(0,t.jsx)("div",{className:"w-32 h-32 bg-white rounded-full flex items-center justify-center",children:(0,t.jsx)(a.default,{src:"/images/HavenRideIcon.png",alt:"HavenRide Logo",width:120,height:120,className:"object-contain"})})}),(0,t.jsxs)("nav",{className:"flex-1 px-4 space-y-2",children:[(0,t.jsxs)(n(),{href:l,className:"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ".concat(r===l?"bg-[#1a5557]":"hover:bg-[#1a5557] hover:bg-opacity-50"),children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),(0,t.jsx)("span",{children:"Home"})]}),(0,t.jsxs)(n(),{href:"".concat(l,"/past-rides"),className:"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ".concat(r==="".concat(l,"/past-rides")?"bg-[#1a5557]":"hover:bg-[#1a5557] hover:bg-opacity-50"),children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,t.jsx)("span",{children:"Past Rides"})]}),(0,t.jsxs)(n(),{href:"".concat(l,"/support"),className:"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ".concat(r==="".concat(l,"/support")?"bg-[#1a5557]":"hover:bg-[#1a5557] hover:bg-opacity-50"),children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,t.jsx)("span",{children:"Support"})]}),(0,t.jsxs)(n(),{href:"".concat(l,"/profile"),className:"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ".concat(r==="".concat(l,"/profile")?"bg-[#1a5557]":"hover:bg-[#1a5557] hover:bg-opacity-50"),children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),(0,t.jsx)("span",{children:"Profile"})]}),"DRIVER"===s&&(0,t.jsxs)(n(),{href:"/driver/earnings",className:"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ".concat("/driver/earnings"===r?"bg-[#1a5557]":"hover:bg-[#1a5557] hover:bg-opacity-50"),children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,t.jsx)("span",{children:"Earnings"})]})]}),(0,t.jsx)("div",{className:"p-4 border-t border-[#1a5557]",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(o.uF,{afterSignOutUrl:"/"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:"Account"}),(0,t.jsx)("p",{className:"text-xs text-gray-300",children:s||"User"})]})]})})]})}var d=r(2115);function h(e){let{onTrigger:s}=e,[r,l]=(0,d.useState)(!1);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>{l(!0),s&&s()},className:"fixed bottom-6 right-6 w-16 h-16 bg-red-600 rounded-full shadow-lg hover:bg-red-700 transition-all hover:scale-110 z-50 flex items-center justify-center",title:"Emergency SOS",children:(0,t.jsx)("span",{className:"text-white font-bold text-lg",children:"SOS"})}),r&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full",children:[(0,t.jsx)("div",{className:"flex justify-center mb-6",children:(0,t.jsx)("div",{className:"w-24 h-24 bg-red-600 rounded-full flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-white font-bold text-3xl",children:"SOS"})})}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-4",children:"Emergency in Progress"}),(0,t.jsx)("p",{className:"text-center text-gray-600 mb-6",children:"Your location and driver details will be shared with HavenRide Safety Desk"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("button",{onClick:()=>{window.location.href="tel:999"},className:"w-full bg-red-600 text-white py-4 rounded-lg font-semibold hover:bg-red-700 transition-colors flex items-center justify-center gap-2",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),"Call 999"]}),(0,t.jsx)("button",{onClick:()=>{alert("Contacting HavenRide Safety Desk...")},className:"w-full border-2 border-gray-300 text-gray-700 py-4 rounded-lg font-semibold hover:bg-gray-50 transition-colors",children:"Contact HavenRide Safety Desk"}),(0,t.jsx)("button",{onClick:()=>{l(!1)},className:"w-full border-2 border-gray-300 text-gray-700 py-4 rounded-lg font-semibold hover:bg-gray-50 transition-colors",children:"Cancel Alert"})]}),(0,t.jsx)("p",{className:"text-xs text-center text-gray-500 mt-6",children:"In case of immediate danger, contact local emergency services."})]})})]})}function x(e){let{children:s,userRole:r}=e;return(0,t.jsxs)("div",{className:"flex min-h-screen bg-gray-50",children:[(0,t.jsx)(c,{userRole:r}),(0,t.jsx)("main",{className:"flex-1 overflow-auto",children:s}),("RIDER"===r||"DRIVER"===r)&&(0,t.jsx)(h,{})]})}}},e=>{e.O(0,[1162,5481,8441,1255,7358],()=>e(e.s=3667)),_N_E=e.O()}]);