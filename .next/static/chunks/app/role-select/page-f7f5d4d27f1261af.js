(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6554],{4939:(e,s,t)=>{"use strict";t.d(s,{A:()=>i});var r=t(5155);function i(e){let{children:s,className:t=""}=e;return(0,r.jsx)("div",{className:"w-full flex justify-center ".concat(t),children:(0,r.jsx)("div",{className:"w-full max-w-7xl px-4 sm:px-6 lg:px-8",children:s})})}},9150:(e,s,t)=>{Promise.resolve().then(t.bind(t,9402))},9402:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d});var r=t(5155),i=t(2115),a=t(63),l=t(5419),n=t(4939);function d(){let{user:e}=(0,l.Jd)(),s=(0,a.useRouter)(),[t,d]=(0,i.useState)(!1),[o,c]=(0,i.useState)(null);async function x(e){if(!t){d(!0),c(null);try{let t=await fetch("/api/users/assign-role",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({role:e})});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to assign role")}"RIDER"===e?s.push("/rider"):"DRIVER"===e?s.push("/driver"):"DISPATCHER"===e?s.push("/dispatcher"):"ADMIN"===e&&s.push("/admin")}catch(e){c(e.message||"Failed to assign role"),d(!1)}}}return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 py-20",children:(0,r.jsx)(n.A,{children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto space-y-8",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-4xl sm:text-5xl font-bold text-[#263238] mb-4",children:"Choose Your Role"}),(0,r.jsx)("p",{className:"text-lg text-neutral-600",children:"Select how you want to use HavenRide"}),!(null==e?void 0:e.id)&&(0,r.jsx)("p",{className:"text-sm text-red-600 mt-2",children:"Please sign in to continue"})]}),o&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-6 py-4 rounded-xl",children:o}),(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[{id:"RIDER",name:"Rider",description:"Book and manage your rides",color:"bg-[#00796B]"},{id:"DRIVER",name:"Driver",description:"Go online and accept rides",color:"bg-[#26A69A]"},{id:"DISPATCHER",name:"Dispatcher",description:"Assign rides and monitor ops",color:"bg-[#4DB6AC]"},{id:"ADMIN",name:"Admin",description:"Manage system and users",color:"bg-[#263238]"}].map(s=>(0,r.jsxs)("button",{onClick:()=>x(s.id),disabled:t||!(null==e?void 0:e.id),className:"bg-white border-2 border-gray-200 rounded-2xl p-8 hover:shadow-xl hover:border-[#00796B] transition-all text-left disabled:opacity-50 disabled:cursor-not-allowed group",children:[(0,r.jsx)("div",{className:"w-16 h-16 ".concat(s.color," rounded-2xl mb-6 flex items-center justify-center text-white text-2xl font-bold"),children:s.name.charAt(0)}),(0,r.jsx)("h3",{className:"text-2xl font-semibold text-[#263238] mb-2 group-hover:text-[#00796B] transition-colors",children:s.name}),(0,r.jsx)("p",{className:"text-neutral-600",children:s.description})]},s.id))}),(0,r.jsx)("div",{className:"text-center pt-6 border-t",children:(0,r.jsx)("p",{className:"text-sm text-neutral-600",children:"You can change your role later from the settings"})})]})})})}}},e=>{e.O(0,[1162,8441,1255,7358],()=>e(e.s=9150)),_N_E=e.O()}]);