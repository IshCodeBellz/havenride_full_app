"use strict";exports.id=2756,exports.ids=[2756],exports.modules={3421:(a,b,c)=>{Object.defineProperty(b,"I",{enumerable:!0,get:function(){return g}});let d=c(71237),e=c(55088),f=c(17679);async function g(a,b,c,g){if((0,d.isNodeNextResponse)(b)){var h;b.statusCode=c.status,b.statusMessage=c.statusText;let d=["set-cookie","www-authenticate","proxy-authenticate","vary"];null==(h=c.headers)||h.forEach((a,c)=>{if("x-middleware-set-cookie"!==c.toLowerCase())if("set-cookie"===c.toLowerCase())for(let d of(0,f.splitCookiesString)(a))b.appendHeader(c,d);else{let e=void 0!==b.getHeader(c);(d.includes(c.toLowerCase())||!e)&&b.appendHeader(c,a)}});let{originalResponse:i}=b;c.body&&"HEAD"!==a.method?await (0,e.pipeToNodeResponse)(c.body,i,g):i.end()}}},6844:(a,b,c)=>{c.d(b,{n:()=>p});var d=c(62593);c(32760);var e=c(44268);c(91733),c(54175);var f=c(6231),g=c(69702),h=class{#a;#b=864e5;constructor(a){this.#a=a}isEventThrottled(a){let b=Date.now(),c=this.#c(a),d=this.#a.getItem(c);return!!d&&!(b-d>this.#b)||(this.#a.setItem(c,b),!1)}#c(a){let{sk:b,pk:c,payload:d,...e}=a,f={...d,...e};return JSON.stringify(Object.keys({...d,...e}).sort().map(a=>f[a]))}},i=class{#d="clerk_telemetry_throttler";getItem(a){return this.#e()[a]}setItem(a,b){try{let c=this.#e();c[a]=b,localStorage.setItem(this.#d,JSON.stringify(c))}catch(a){a instanceof DOMException&&("QuotaExceededError"===a.name||"NS_ERROR_DOM_QUOTA_REACHED"===a.name)&&localStorage.length>0&&localStorage.removeItem(this.#d)}}removeItem(a){try{let b=this.#e();delete b[a],localStorage.setItem(this.#d,JSON.stringify(b))}catch{}}#e(){try{let a=localStorage.getItem(this.#d);if(!a)return{};return JSON.parse(a)}catch{return{}}}static isSupported(){return"undefined"!=typeof window&&!!window.localStorage}},j=class{#a=new Map;#f=1e4;getItem(a){return this.#a.size>this.#f?void this.#a.clear():this.#a.get(a)}setItem(a,b){this.#a.set(a,b)}removeItem(a){this.#a.delete(a)}},k=new Set(["error","warn","info","debug","trace"]),l={samplingRate:1,maxBufferSize:5,endpoint:"https://clerk-telemetry.com"},m=class{#g;#h;#i={};#j=[];#k=null;constructor(a){this.#g={maxBufferSize:a.maxBufferSize??l.maxBufferSize,samplingRate:a.samplingRate??l.samplingRate,perEventSampling:a.perEventSampling??!0,disabled:a.disabled??!1,debug:a.debug??!1,endpoint:l.endpoint},a.clerkVersion||"undefined"!=typeof window?this.#i.clerkVersion=a.clerkVersion??"":this.#i.clerkVersion="",this.#i.sdk=a.sdk,this.#i.sdkVersion=a.sdkVersion,this.#i.publishableKey=a.publishableKey??"";let b=(0,g.q5)(a.publishableKey);b&&(this.#i.instanceType=b.instanceType),a.secretKey&&(this.#i.secretKey=a.secretKey.substring(0,16));let c=i.isSupported()?new i:new j;this.#h=new h(c)}get isEnabled(){return!("development"!==this.#i.instanceType||this.#g.disabled||"undefined"!=typeof process&&process.env&&(0,f.zz)(process.env.CLERK_TELEMETRY_DISABLED)||"undefined"!=typeof window&&window?.navigator?.webdriver)}get isDebug(){return this.#g.debug||"undefined"!=typeof process&&process.env&&(0,f.zz)(process.env.CLERK_TELEMETRY_DEBUG)}record(a){try{let b=this.#l(a.event,a.payload);if(this.#m(b.event,b),!this.#n(b,a.eventSamplingRate))return;this.#j.push({kind:"event",value:b}),this.#o()}catch(a){console.error("[clerk/telemetry] Error recording telemetry event",a)}}recordLog(a){try{if(!this.#p(a))return;let b="string"==typeof a?.level&&k.has(a.level),c="string"==typeof a?.message&&a.message.trim().length>0,d=null,e=a?.timestamp;if("number"==typeof e||"string"==typeof e){let a=new Date(e);Number.isNaN(a.getTime())||(d=a)}if(!b||!c||null===d){this.isDebug&&"undefined"!=typeof console&&console.warn("[clerk/telemetry] Dropping invalid telemetry log entry",{levelIsValid:b,messageIsValid:c,timestampIsValid:null!==d});return}let f=this.#q(),g={sdk:f.name,sdkv:f.version,cv:this.#i.clerkVersion??"",lvl:a.level,msg:a.message,ts:d.toISOString(),pk:this.#i.publishableKey||null,payload:this.#r(a.context)};this.#j.push({kind:"log",value:g}),this.#o()}catch(a){console.error("[clerk/telemetry] Error recording telemetry log entry",a)}}#n(a,b){return this.isEnabled&&!this.isDebug&&this.#s(a,b)}#p(a){return!0}#s(a,b){let c=Math.random();return!!(c<=this.#g.samplingRate&&(!1===this.#g.perEventSampling||void 0===b||c<=b))&&!this.#h.isEventThrottled(a)}#o(){if("undefined"==typeof window)return void this.#t();if(this.#j.length>=this.#g.maxBufferSize){this.#k&&("undefined"!=typeof cancelIdleCallback?cancelIdleCallback(Number(this.#k)):clearTimeout(Number(this.#k))),this.#t();return}this.#k||("requestIdleCallback"in window?this.#k=requestIdleCallback(()=>{this.#t(),this.#k=null}):this.#k=setTimeout(()=>{this.#t(),this.#k=null},0))}#t(){let a=[...this.#j];if(this.#j=[],this.#k=null,0===a.length)return;let b=a.filter(a=>"event"===a.kind).map(a=>a.value),c=a.filter(a=>"log"===a.kind).map(a=>a.value);b.length>0&&fetch(new URL("/v1/event",this.#g.endpoint),{headers:{"Content-Type":"application/json"},keepalive:!0,method:"POST",body:JSON.stringify({events:b})}).catch(()=>void 0),c.length>0&&fetch(new URL("/v1/logs",this.#g.endpoint),{headers:{"Content-Type":"application/json"},keepalive:!0,method:"POST",body:JSON.stringify({logs:c})}).catch(()=>void 0)}#m(a,b){this.isDebug&&(void 0!==console.groupCollapsed?(console.groupCollapsed("[clerk/telemetry]",a),console.log(b),console.groupEnd()):console.log("[clerk/telemetry]",a,b))}#q(){let a={name:this.#i.sdk,version:this.#i.sdkVersion};if("undefined"!=typeof window){let b=window;if(b.Clerk){let c=b.Clerk;if("object"==typeof c&&null!==c&&"constructor"in c&&"function"==typeof c.constructor&&c.constructor.sdkMetadata){let{name:b,version:d}=c.constructor.sdkMetadata;void 0!==b&&(a.name=b),void 0!==d&&(a.version=d)}}}return a}#l(a,b){let c=this.#q();return{event:a,cv:this.#i.clerkVersion??"",it:this.#i.instanceType??"",sdk:c.name,sdkv:c.version,...this.#i.publishableKey?{pk:this.#i.publishableKey}:{},...this.#i.secretKey?{sk:this.#i.secretKey}:{},payload:b}}#r(a){if(null==a||"object"!=typeof a)return null;try{let b=JSON.parse(JSON.stringify(a));if(b&&"object"==typeof b&&!Array.isArray(b))return b;return null}catch{return null}}};c(62141),(0,e.C)(d.nr);var n=c(89963);let o={secretKey:n.rB,publishableKey:n.At,apiUrl:n.H$,apiVersion:n.mG,userAgent:"@clerk/nextjs@6.34.0",proxyUrl:n.Rg,domain:n.V2,isSatellite:n.fS,machineSecretKey:n.Fx,sdkMetadata:n.tm,telemetry:{disabled:n.nN,debug:n.Mh}},p=a=>(function(a){let b={...a},c=(0,d.y3)(b),e=(0,d.Bs)({options:b,apiClient:c}),f=new m({publishableKey:b.publishableKey,secretKey:b.secretKey,samplingRate:.1,...b.sdkMetadata?{sdk:b.sdkMetadata.name,sdkVersion:b.sdkMetadata.version}:{},...b.telemetry||{}});return{...c,...e,telemetry:f}})({...o,...a})},59561:(a,b,c)=>{c.d(b,{$:()=>j});var d=c(40082),e=c(45299),f=c(6844),g=c(73582);let h=new(c(16698)).AsyncLocalStorage;var i=c(66079);let j=async()=>{var a,b;let c;try{let a=await (0,e.TG)(),b=(0,g._b)(a,d.AA.Headers.ClerkRequestData);c=(0,i.Kk)(b)}catch(a){if(a&&(0,e.Sz)(a))throw a}let j=null!=(b=null==(a=h.getStore())?void 0:a.get("requestData"))?b:c;return(null==j?void 0:j.secretKey)||(null==j?void 0:j.publishableKey)?(0,f.n)(j):(0,f.n)({})}},95736:(a,b,c)=>{a.exports=c(44870)}};